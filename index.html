<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Study</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        .container {
            margin-top: 250px;
            padding: 20px;
        }
        .example {
            margin-bottom: 60px;
            text-align: center;
        }
        .question {
            margin-bottom: 40px;
            text-align: center;
        }
        .image-container {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        .image-row {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 0px;
        }
        .image-title {
            font-weight: bold;
            width: 70px;
            text-align: center;
        }
        .image-column {
            margin: 0 5px;
            text-align: center;
        }
        .selection-image {
            cursor: pointer;
            border: 10px solid transparent;
            transition: border 0.3s;
            width: 150px;
            height: 150px;
            object-fit: cover;
        }
        .selection-image.selected {
            border: 10px solid red;
        }
        .instructions{
          max-width: 790px;            /* readable width */
          margin: 8px auto 0;          /* center the block within the green bar */
          text-align: left;            /* left-align text/bullets */
          font-size: 1rem;
          line-height: 1.5;
        }
        .instructions ul{
          margin: 8px 0 0 0;           /* tighten spacing */
          padding-left: 22px;          /* proper bullet indent */
        }
        footer {
            text-align: center;
            padding: 20px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
        }
    </style>
</head>
<body>

<header>
    <h1 id="pageTitle">Template of User Study</h1>
    <div id="pageInstructions" class="instructions"></div>
</header>

<div class="container">
    <form id="surveyForm">
        <label for="name">Name: </label>
        <input type="text" id="name" required>
        <!-- <label for="email">Email: </label>
        <input type="email" id="email" required> -->
        <button id="nextButton">Next Page</button>
        
        <!-- Example Section -->
         <div class="example">
            <h2>Example</h2>
            <img src="cifar10/example.png" alt="Example" style="width: 1000px; object-fit: cover;">
        </div>

        <div id="questions-container">
            <!-- Questions will be dynamically added here -->
        </div>

        <footer>
            <button type="button" onclick="submitSurvey()">Submit</button>
        </footer>
    </form>
</div>

<script>
    // Configuration for folder paths, indices, image filenames, page title, and instructions
    const config = {
        folders: [
            {name: "AutoAttack", path: "cifar10/AutoAttack"},
            {name: "GreedyPixel-White", path: "cifar10/GreedyPixel-White"},
            {name: "MCG", path: "cifar10/MCG"},
            {name: "GreedyPixel-Black", path: "cifar10/GreedyPixel-Black"},
            {name: "BruSLe", path: "cifar10/BruSLe"},
            {name: "GreedyPixel-Black-Unconstrained", path: "cifar10/GreedyPixel-Black-Unconstrained"},
        ],
        indices: [  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  12,  13,  14,
                 16,  17,  18,  19,  20,  21,  22,  24,  25,  26,  27,  28,  29,  30,
                 31,  32,  33,  34,  35,  36,  38,  39,  40,  41,  42,  43,  44,  45,
                 46,  47,  48,  49,  50,  51,  53,  54, 55], // Indexes for the images in each folder
        // indices: [  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  12,  13,  14,
        //          16,  17,  18,  19,  20,  21,  22,  24,  25,  26,  27,  28,  29,  30,
        //          31,  32,  33,  34,  35,  36,  38,  39,  40,  41,  42,  43,  44,  45,
        //          46,  47,  48,  49,  50,  51,  53,  54,  55,  56,  57,  58,  60,  62,
        //          63,  64,  65,  66,  67,  68,  69,  70,  71,  72,  73,  74,  75,  76,
        //          77,  79,  80,  81,  82,  83,  84,  85,  86,  87,  88,  89,  90,  91,
        //          92,  93,  94,  95,  96,  97,  98,  99, 100, 101, 102, 103, 104, 105,
        //         106, 107], // Indexes for the images in each folder
        pageTitle: "Perceptual Study on Adversarial Perturbations (1/2)",
        pageInstructions:
            "Thank you for participating in this ~15-minute, 2-page study.<br>\
            <ul>\
              <li>For each question, compare the test images with the original.</li>\
              <li><b>Select every test image where the adversarial noise is <u>invisible</u></b> (the image looks unchanged).</li>\
              <li>You may select multiple images per question.</li>\
              <li>When finished, click <b>Submit</b> and email the generated log file to \
                  <a href='mailto:hanrui_wang@nii.ac.jp'>hanrui_wang@nii.ac.jp</a>.</li>\
              <li><b>Note:</b> Refreshing the page will clear all your selections.</li>\
            </ul>"
    };

    const imageFiles = ['00701_2.png', '00757_8.png', '00712_8.png', '00251_3.png', '00375_7.png', '00502_5.png', '00115_3.png', '00627_4.png', '00760_3.png', '00008_3.png', '00447_0.png', '00194_7.png', '00268_7.png', '00481_6.png', '00972_2.png', '00033_5.png', '00578_7.png', '00210_7.png', '00149_2.png', '00236_4.png', '00576_8.png', '00329_6.png', '00248_2.png', '00212_5.png', '00522_0.png', '00517_9.png', '00037_1.png', '00002_8.png', '00976_6.png', '00047_9.png', '00587_4.png', '00985_8.png', '00552_8.png', '00049_6.png', '00291_2.png', '00035_2.png', '00952_6.png', '00833_2.png', '00070_2.png', '00565_3.png', '00192_0.png', '00362_8.png', '00664_3.png', '00642_0.png', '00835_4.png', '00856_7.png', '00424_2.png', '00472_8.png', '00725_2.png', '00558_3.png', '00483_5.png', '00561_7.png', '00242_8.png', '00458_4.png', '00539_0.png', '00277_3.png', '00782_7.png', '00316_7.png', '00547_6.png', '00638_0.png', '00872_4.png', '00956_0.png', '00581_0.png', '00176_3.png', '00017_7.png', '00295_4.png', '00397_3.png', '00662_7.png', '00659_1.png', '00454_9.png', '00500_4.png', '00411_9.png', '00131_1.png', '00786_3.png', '00137_7.png', '00974_7.png', '00045_9.png', '00408_8.png', '00589_9.png', '00709_8.png', '00420_4.png', '00465_4.png', '00259_9.png', '00874_3.png', '00831_3.png', '00336_3.png', '00360_9.png', '00623_2.png', '00806_8.png', '00679_5.png', '00441_4.png', '00344_8.png', '00139_9.png', '00357_2.png', '00808_7.png', '00766_7.png', '00607_3.png', '00705_4.png', '00651_9.png', '00280_9.png', '00469_8.png', '00911_3.png', '00314_4.png', '00377_7.png', '00189_0.png', '00601_5.png', '00935_2.png', '00031_5.png', '00120_8.png', '00926_8.png', '00426_3.png', '00734_9.png', '00727_3.png', '00330_1.png', '00353_2.png', '00646_3.png', '00524_0.png', '00094_4.png', '00554_9.png', '00759_1.png', '00332_3.png', '00216_7.png', '00364_9.png', '00746_6.png', '00870_3.png', '00218_8.png', '00563_2.png', '00096_6.png', '00260_8.png', '00931_2.png', '00124_8.png', '00090_0.png', '00506_7.png', '00467_3.png', '00543_7.png', '00128_5.png', '00393_2.png', '00764_1.png', '00640_5.png', '00950_3.png', '00190_5.png', '00779_5.png', '00415_9.png', '00567_7.png', '00156_2.png', '00113_2.png', '00817_5.png', '00478_5.png', '00994_6.png', '00520_5.png', '00609_9.png', '00718_4.png', '00876_4.png', '00967_9.png', '00111_0.png', '00699_5.png', '00922_9.png', '00154_0.png', '00056_7.png', '00850_7.png', '00013_7.png', '00508_9.png', '00225_9.png', '00255_0.png', '00598_5.png', '00273_3.png', '00402_7.png', '00738_1.png', '00937_5.png', '00152_6.png', '00439_1.png', '00169_0.png', '00275_5.png', '00351_1.png', '00230_5.png', '00185_8.png', '00811_3.png', '00913_4.png', '00074_0.png', '00762_6.png', '00603_2.png', '00928_0.png', '00232_5.png', '00849_4.png', '00069_7.png', '00297_0.png', '00837_2.png', '00388_2.png', '00445_7.png', '00892_7.png', '00463_4.png', '00828_5.png', '00682_4.png', '00939_8.png', '00612_8.png', '00309_6.png', '00583_4.png', '00117_4.png', '00954_4.png', '00461_6.png', '00288_7.png', '00334_6.png', '00621_7.png', '00904_8.png', '00422_0.png', '00896_3.png', '00869_1.png', '00257_0.png', '00373_4.png', '00271_3.png', '00784_7.png', '00498_2.png', '00355_7.png', '00605_6.png', '00889_4.png', '00799_2.png', '00229_6.png', '00894_1.png', '00406_0.png', '00618_2.png', '00541_7.png', '00933_2.png', '00135_2.png', '00126_8.png', '00915_1.png', '00742_0.png', '00419_7.png', '00740_2.png', '00391_2.png', '00723_1.png', '00989_0.png', '00371_7.png', '00981_9.png', '00890_4.png', '00526_0.png', '00492_8.png', '00813_2.png', '00990_1.png', '00052_0.png', '00854_0.png', '00636_8.png', '00395_6.png', '00743_7.png', '00720_4.png', '00518_5.png', '00687_6.png', '00708_8.png', '00530_9.png', '00823_8.png', '00112_6.png', '00615_8.png', '00356_3.png', '00211_4.png', '00254_4.png', '00110_4.png', '00333_6.png', '00829_3.png', '00231_1.png', '00993_4.png', '00973_1.png', '00296_6.png', '00018_8.png', '00215_0.png', '00848_2.png', '00317_7.png', '00525_5.png', '00369_1.png', '00912_0.png', '00855_7.png', '00164_8.png', '00114_1.png', '00389_5.png', '00783_6.png', '00265_8.png', '00661_4.png', '00199_8.png', '00591_9.png', '00308_1.png', '00562_6.png', '00544_5.png', '00079_8.png', '00168_5.png', '00009_1.png', '00396_2.png', '00663_6.png', '00711_8.png', '00385_8.png', '00328_4.png', '00001_8.png', '00495_8.png', '00155_5.png', '00995_3.png', '00405_4.png', '00272_6.png', '00809_7.png', '00579_5.png', '00010_0.png', '00778_0.png', '00540_1.png', '00997_1.png', '00421_5.png', '00093_6.png', '00588_8.png', '00785_0.png', '00290_1.png', '00604_1.png', '00392_6.png', '00641_3.png', '00667_0.png', '00979_9.png', '00048_7.png', '00354_2.png', '00830_1.png', '00798_7.png', '00633_8.png', '00418_3.png', '00029_6.png', '00313_0.png', '00968_1.png', '00918_8.png', '00193_1.png', '00564_2.png', '00249_2.png', '00930_4.png', '00814_0.png', '00559_2.png', '00097_0.png', '00936_2.png', '00834_5.png', '00166_8.png', '00726_1.png', '00276_0.png', '00243_9.png', '00991_5.png', '00880_8.png', '00462_1.png', '00957_3.png', '00208_7.png', '00030_6.png', '00810_5.png', '00016_5.png', '00503_4.png', '00109_7.png', '00068_3.png', '00838_9.png', '00647_4.png', '00763_0.png', '00459_6.png', '00624_7.png', '00153_0.png', '00960_9.png', '00032_4.png', '00116_0.png', '00812_7.png', '00501_6.png', '00859_8.png', '00222_9.png', '00832_2.png', '00877_2.png', '00897_7.png', '00466_4.png', '00577_9.png', '00532_9.png', '00685_6.png', '00599_3.png', '00704_7.png', '00741_7.png', '00516_8.png', '00129_2.png', '00622_1.png', '00888_0.png', '00818_8.png', '00765_2.png', '00921_9.png', '00914_0.png', '00036_4.png', '00932_3.png', '00895_1.png', '00407_1.png', '00696_8.png', '00202_8.png', '00606_4.png', '00752_9.png', '00767_0.png', '00383_9.png', '00620_7.png', '00698_7.png', '00071_6.png', '00012_5.png', '00884_9.png', '00423_0.png', '00091_3.png', '00521_7.png', '00376_0.png', '00613_8.png', '00438_3.png', '00761_6.png', '00446_5.png', '00739_3.png', '00195_2.png', '00929_0.png', '00681_6.png', '00374_2.png', '00700_7.png', '00745_7.png', '00602_0.png', '00075_2.png', '00873_2.png', '00758_2.png', '00427_4.png', '00546_1.png', '00893_6.png', '00095_6.png', '00023_9.png', '00971_4.png', '00959_8.png', '00352_0.png', '00527_0.png', '00871_1.png', '00910_5.png', '00294_3.png', '00702_4.png', '00306_8.png', '00938_9.png', '00940_9.png', '00975_0.png', '00916_3.png', '00717_8.png', '00247_9.png', '00237_0.png', '00464_3.png', '00228_7.png', '00999_8.png', '00733_9.png', '00311_6.png', '00270_2.png', '00868_0.png', '00235_0.png', '00256_3.png', '00706_2.png', '00568_9.png', '00479_4.png', '00586_3.png', '00080_8.png', '00643_7.png', '00988_2.png', '00953_1.png', '00315_0.png', '00645_1.png', '00188_4.png', '00747_6.png', '00077_3.png', '00955_7.png', '00130_4.png', '00857_0.png', '00460_5.png', '00658_4.png', '00891_6.png', '00250_5.png', '00654_9.png', '00285_9.png', '00611_9.png', '00836_1.png', '00560_0.png', '00639_5.png', '00444_5.png', '00934_7.png', '00177_7.png', '00053_3.png', '00580_4.png', '00269_0.png', '00781_1.png', '00948_3.png', '00542_6.png', '00678_0.png', '00440_1.png', '00923_9.png', '00789_8.png', '00584_0.png', '00358_8.png', '00057_7.png', '00292_6.png', '00390_1.png', '00148_5.png', '00370_4.png', '00505_4.png', '00619_1.png', '00451_9.png', '00523_7.png', '00484_5.png', '00144_8.png', '00134_1.png', '00750_9.png', '00381_9.png', '00694_8.png', '00499_0.png', '00038_9.png', '00226_6.png', '00200_5.png', '00964_6.png', '00497_2.png', '00162_6.png', '00689_0.png', '00055_8.png', '00258_0.png', '00101_5.png', '00488_5.png', '00335_9.png', '00509_4.png', '00665_8.png', '00044_0.png', '00034_9.png', '00905_7.png', '00719_9.png', '00204_1.png', '00274_8.png', '00241_1.png', '00105_1.png', '00378_0.png', '00123_2.png', '00007_6.png', '00749_5.png', '00425_9.png', '00538_9.png', '00672_6.png', '00387_2.png', '00151_9.png', '00040_4.png', '00298_0.png', '00401_8.png', '00510_5.png', '00536_6.png', '00086_2.png', '00412_3.png', '00555_4.png', '00962_1.png', '00278_4.png', '00394_9.png', '00692_2.png', '00289_9.png', '00512_6.png', '00436_2.png', '00186_6.png', '00946_0.png', '00175_9.png', '00724_8.png', '00365_4.png', '00180_0.png', '00821_2.png', '00146_6.png', '00281_0.png', '00676_3.png', '00879_7.png', '00182_2.png', '00191_8.png', '00816_9.png', '00595_4.png', '00853_9.png', '00046_3.png', '00302_3.png', '00263_7.png', '00796_1.png', '00337_8.png', '00409_2.png', '00025_2.png', '00339_7.png', '00907_6.png', '00073_8.png', '00875_8.png', '00566_9.png', '00787_9.png', '00138_2.png', '00059_6.png', '00486_9.png', '00851_9.png', '00027_0.png', '00864_0.png', '00343_5.png', '00683_8.png', '00582_8.png', '00042_5.png', '00064_6.png', '00827_6.png', '00882_3.png', '00571_7.png', '00473_0.png', '00557_4.png', '00206_0.png', '00803_7.png', '00121_3.png', '00860_4.png', '00944_0.png', '00728_6.png', '00434_3.png', '00132_8.png', '00005_6.png', '00429_6.png', '00548_2.png', '00233_8.png', '00341_6.png', '00304_6.png', '00403_8.png', '00534_6.png', '00084_2.png', '00635_6.png', '00754_2.png', '00670_6.png', '00099_7.png', '00690_3.png', '00217_9.png', '00252_9.png', '00507_9.png', '00475_7.png', '00986_3.png', '00966_6.png', '00650_3.png', '00363_1.png', '00003_0.png', '00942_7.png', '00866_3.png', '00674_2.png', '00283_1.png', '00909_8.png', '00372_9.png', '00652_5.png', '00245_3.png', '00213_9.png', '00553_5.png', '00575_6.png', '00669_3.png', '00060_7.png', '00951_9.png', '00157_9.png', '00805_4.png', '00899_5.png', '00300_6.png', '00416_0.png', '00173_8.png', '00160_2.png', '00656_1.png', '00267_4.png', '00320_3.png', '00118_2.png', '00219_2.png', '00862_3.png', '00184_3.png', '00471_7.png', '00846_2.png', '00927_6.png', '00066_1.png', '00482_8.png', '00457_5.png', '00197_8.png', '00220_7.png', '00790_3.png', '00770_6.png', '00140_6.png', '00801_1.png', '00493_1.png', '00925_5.png', '00844_1.png', '00410_7.png', '00737_4.png', '00626_9.png', '00287_0.png', '00448_2.png', '00529_6.png', '00842_7.png', '00136_9.png', '00082_1.png', '00608_3.png', '00430_2.png', '00794_7.png', '00224_3.png', '00722_8.png', '00731_2.png', '00468_7.png', '00477_0.png', '00442_9.png', '00715_3.png', '00631_5.png', '00617_6.png', '00776_2.png', '00324_4.png', '00414_1.png', '00840_7.png', '00127_3.png', '00171_9.png', '00774_0.png', '00345_5.png', '00261_1.png', '00453_3.png', '00062_6.png', '00772_6.png', '00600_8.png', '00350_9.png', '00792_3.png', '00980_2.png', '00628_4.png', '00398_0.png', '00014_9.png', '00021_0.png', '00735_4.png', '00088_8.png', '00713_7.png', '00637_3.png', '00322_2.png', '00179_0.png', '00982_0.png', '00649_5.png', '00573_3.png', '00107_6.png', '00593_6.png', '00901_6.png', '00142_6.png', '00491_0.png', '00319_5.png', '00825_3.png', '00331_9.png', '00367_3.png', '00756_6.png', '00480_8.png', '00903_5.png', '00051_8.png', '00455_4.png', '00597_3.png', '00103_3.png', '00239_5.png', '00125_0.png', '00807_4.png', '00551_5.png', '00769_4.png', '00514_5.png', '00326_7.png', '00977_8.png', '00349_9.png', '00432_3.png', '00984_7.png', '00886_0.png', '00361_5.png', '00159_4.png', '00347_6.png', '00610_6.png', '00970_9.png', '00022_4.png', '00133_9.png', '00511_6.png', '00119_7.png', '00078_3.png', '00691_2.png', '00634_7.png', '00961_1.png', '00122_1.png', '00677_1.png', '00487_9.png', '00788_6.png', '00000_3.png', '00262_5.png', '00666_9.png', '00688_3.png', '00072_8.png', '00841_0.png', '00496_0.png', '00145_7.png', '00061_3.png', '00630_2.png', '00380_6.png', '00227_4.png', '00978_1.png', '00908_8.png', '00515_3.png', '00843_2.png', '00865_1.png', '00815_8.png', '00293_9.png', '00312_8.png', '00969_9.png', '00919_0.png', '00570_6.png', '00535_6.png', '00020_7.png', '00826_7.png', '00736_1.png', '00703_8.png', '00755_2.png', '00384_2.png', '00205_3.png', '00793_4.png', '00253_9.png', '00470_3.png', '00004_6.png', '00041_6.png', '00839_2.png', '00264_0.png', '00178_5.png', '00680_9.png', '00771_1.png', '00106_3.png', '00945_3.png', '00824_7.png', '00143_3.png', '00802_4.png', '00368_8.png', '00240_1.png', '00321_5.png', '00266_2.png', '00947_1.png', '00104_1.png', '00043_6.png', '00883_0.png', '00629_1.png', '00203_7.png', '00898_3.png', '00596_7.png', '00063_3.png', '00474_5.png', '00431_5.png', '00987_1.png', '00303_2.png', '00310_8.png', '00325_1.png', '00675_0.png', '00714_4.png', '00732_7.png', '00163_6.png', '00920_6.png', '00965_6.png', '00852_8.png', '00054_8.png', '00531_0.png', '00504_9.png', '00433_7.png', '00183_2.png', '00476_6.png', '00996_8.png', '00943_4.png', '00011_9.png', '00100_4.png', '00822_0.png', '00485_9.png', '00777_6.png', '00039_5.png', '00417_7.png', '00083_7.png', '00452_7.png', '00102_6.png', '00494_1.png', '00730_4.png', '00058_4.png', '00556_6.png', '00800_7.png', '00174_9.png', '00456_3.png', '00983_4.png', '00729_5.png', '00400_9.png', '00150_8.png', '00861_6.png', '00900_2.png', '00592_2.png', '00744_9.png', '00214_8.png', '00958_7.png', '00284_0.png', '00660_9.png', '00549_5.png', '00625_9.png', '00386_7.png', '00673_3.png', '00305_1.png', '00087_7.png', '00067_2.png', '00209_9.png', '00490_1.png', '00098_0.png', '00528_4.png', '00780_9.png', '00085_5.png', '00992_8.png', '00050_9.png', '00845_3.png', '00716_3.png', '00489_0.png', '00028_9.png', '00878_3.png', '00697_2.png', '00768_5.png', '00161_1.png', '00359_0.png', '00917_8.png', '00147_2.png', '00820_6.png', '00721_8.png', '00282_6.png', '00653_6.png', '00998_3.png', '00616_6.png', '00158_5.png', '00244_0.png', '00887_1.png', '00081_1.png', '00170_9.png', '00348_8.png', '00906_1.png', '00594_1.png', '00024_5.png', '00338_0.png', '00668_1.png', '00234_8.png', '00201_1.png', '00819_3.png', '00519_8.png', '00585_9.png', '00238_5.png', '00404_8.png', '00550_5.png', '00181_5.png', '00684_9.png', '00614_5.png', '00632_6.png', '00015_8.png', '00141_5.png', '00545_9.png', '00187_3.png', '00342_2.png', '00858_7.png', '00307_2.png', '00644_9.png', '00847_0.png', '00318_5.png', '00165_4.png', '00413_6.png', '00537_2.png', '00648_4.png', '00108_8.png', '00791_0.png', '00693_7.png', '00323_3.png', '00089_9.png', '00428_0.png', '00340_2.png', '00221_6.png', '00207_5.png', '00366_1.png', '00881_4.png', '00435_7.png', '00299_6.png', '00279_3.png', '00963_6.png', '00710_6.png', '00657_1.png', '00286_1.png', '00949_8.png', '00223_4.png', '00399_3.png', '00437_5.png', '00513_1.png', '00076_9.png', '00167_4.png', '00379_6.png', '00863_3.png', '00382_0.png', '00246_1.png', '00327_5.png', '00301_6.png', '00885_0.png', '00941_1.png', '00751_2.png', '00695_3.png', '00797_4.png', '00686_9.png', '00346_4.png', '00092_8.png', '00574_6.png', '00450_2.png', '00867_7.png', '00804_4.png', '00443_9.png', '00569_2.png', '00707_9.png', '00172_9.png', '00026_4.png', '00533_5.png', '00795_7.png', '00753_1.png', '00775_2.png', '00065_2.png', '00590_6.png', '00902_6.png', '00006_1.png', '00924_5.png', '00748_2.png', '00773_4.png', '00449_2.png', '00671_3.png', '00572_1.png', '00196_8.png', '00019_6.png', '00655_2.png', '00198_7.png'];

    // Helper function to pad index to 5 digits (e.g., 23 becomes "00023")
    function padIndex(index) {
        return String(index).padStart(5, '0');
    }

    // Function to randomize the display order of testA, testB, etc.
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Populating questions dynamically
    function populateQuestions() {
        document.getElementById("pageTitle").innerText = config.pageTitle;
        document.getElementById("pageInstructions").innerHTML = config.pageInstructions;

        const nextButton = document.getElementById("nextButton");

        nextButton.addEventListener("click", () => {
            window.location.href = "index2.html";
        });

        const questionsContainer = document.getElementById('questions-container');

        config.indices.forEach((idx, questionNumber) => {
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question';
            questionDiv.dataset.question = questionNumber + 1;

            const questionTitle = document.createElement('h2');
            questionTitle.textContent = `Question ${questionNumber + 1}`;
            questionDiv.appendChild(questionTitle);

            const originalRow = document.createElement('div');
            originalRow.className = 'image-row';

            // Add the "Original" row label
            const originalTitle = document.createElement('div');
            originalTitle.className = 'image-title';
            originalTitle.innerText = 'Original';
            originalRow.appendChild(originalTitle);

            const testRow = document.createElement('div');
            testRow.className = 'image-row';

            // Add the "Test" row label (randomized test folders will be displayed here)
            const testTitle = document.createElement('div');
            testTitle.className = 'image-title';
            testTitle.innerText = 'Test';
            testRow.appendChild(testTitle);

            // Create an array of the test folders (excluding "original")
            let testFolders = config.folders.filter(folder => folder.name !== "original");
            testFolders = shuffleArray(testFolders); // Randomize order

            // Add the original images (repeated to match number of test images)
            for (let i = 0; i < testFolders.length; i++) {
                const originalColumn = createImageColumn("Original", "cifar10/original", idx, false);
                originalRow.appendChild(originalColumn);
            }

            // Add test images
            testFolders.forEach(folder => {
                const testColumn = createImageColumn(folder.name, folder.path, idx, true);
                testRow.appendChild(testColumn);
            });

            questionDiv.appendChild(originalRow);
            questionDiv.appendChild(testRow);
            questionsContainer.appendChild(questionDiv);
        });
    }

    // Function to create a column with an image and its title
    function createImageColumn(title, folderPath, index, isSelectable) {
        const paddedIndex = padIndex(index); // Ensure index is 5 digits
        const fileName = imageFiles.find(file => file.startsWith(paddedIndex));

        const columnDiv = document.createElement('div');
        columnDiv.className = 'image-column';

        const img = document.createElement('img');
        img.src = `${folderPath}/${fileName}`;
        img.alt = `${title}`;
        img.className = 'selection-image';
        img.dataset.folder = folderPath;

        // Add click event only for selectable images (not for "original")
        if (isSelectable) {
            img.onclick = function() {
                this.classList.toggle('selected');
            };
        } else {
            img.style.cursor = "not-allowed";  // Disable selection for original images
        }

        columnDiv.appendChild(img);
        return columnDiv;
    }

    // Function to handle survey submission
    function submitSurvey() {
        const name = document.getElementById("name").value;
        // const email = document.getElementById("email").value;

        let log = `Name: ${name}\n\n`;
        const results = {};
        let folderCounts = {};

        config.folders.forEach(folder => {
            folderCounts[folder.name] = 0;
        });

        document.querySelectorAll('.question').forEach((question, index) => {
            const questionNum = `Q${index + 1}`;
            results[questionNum] = [];
            question.querySelectorAll('.selection-image.selected').forEach(img => {
                const folder = img.dataset.folder;
                results[questionNum].push(folder);
                folderCounts[folder]++;
            });
        });

        // Add folder summary to log
        let folderSummary = '';
        for (let [folder, count] of Object.entries(folderCounts)) {
            folderSummary += `${folder}: ${count} selected\n`;
        }

        // Generate log details per question
        let selectionSummary = '';
        for (let [question, folders] of Object.entries(results)) {
            selectionSummary += `${question}: ${folders.join(', ')}\n`;
        }

        const blob = new Blob([log + folderSummary + selectionSummary], {type: 'text/plain'});
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `${name}_cifar10.txt`;
        link.click();

        // Redirect to index2.html after download
        setTimeout(() => {
            window.location.href = 'index2.html';
        }, 500); // Delay to ensure the download starts before redirection
    }

    // Load the questions when the page loads
    window.onload = populateQuestions;
</script>

</body>
</html>